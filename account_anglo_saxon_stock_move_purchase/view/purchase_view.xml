<?xml version='1.0' encoding='UTF-8'?>
<openerp>
  <data>
    <record id="purchase_stock_accrual_view" model="ir.ui.view">
        <field name="name">Purchase Stock Accrual</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_2_stock_picking"/>
        <field name="arch" type="xml">
             <xpath expr="//div[contains(@class, 'oe_button_box')]" position="inside">
                <button
                    type="object"
                    name="view_accrual"
                    class="oe_stat_button"
                    icon="fa-random"
                    groups="account.group_account_user"
                    >
                    <div>
                        <field name="reconciliation_pending"/> of <field name="unreconciled_lines"/><br/>
                    </div>
                    <label string="Stock Accruals"/>
                </button>
            </xpath>
        </field>
    </record>

    <record id="purchase_stock_accrual_view2" model="ir.ui.view">
        <field name="name">Purchase Stock Accrual2</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="before">
                <button
                    type="object"
                    name="reconcile_stock_accrual"
                    groups="account.group_account_user"
                    string="Reconcile Accruals"
                    attrs="{'invisible':[('reconciliation_pending','=',0)]}"
                    class="oe_highlight"
                    />
            </xpath>
        </field>
    </record>

    <record id="view_purchase order stock accrual search" model="ir.ui.view">
        <field name="name">Purchase Order Stock Accrual Search</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.view_purchase_order_filter"/>
        <field name="priority">26</field>
        <field name="arch" type="xml">
            <xpath expr="//filter[@string='Quotations']" position="after">
                <filter string="Pending for Reconciliation" domain="[('reconciliation_pending','!=',0)]"/>
                <filter string="Unreconciled Lines" domain="[('unreconciled_lines','!=',0)]"/>
                <filter string="Unreconciled &amp; Not Pending for Reconciliation Lines" domain="[('unreconciled_lines','!=',0),('reconciliation_pending','=',0)]"/>
            </xpath>
        </field>
    </record>

    <record id="view_purchase order stock accrual tree" model="ir.ui.view">
        <field name="name">Purchase Order Stock Accrual Tree</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_tree"/>
        <field name="priority">26</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="after">
                <field name="reconciliation_pending" string="Rec. Pending"/>
                <field name="unreconciled_lines" string="Unrec. Lines"/>
            </xpath>
        </field>
    </record>
  </data>
</openerp>
