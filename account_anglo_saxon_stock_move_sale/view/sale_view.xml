<?xml version='1.0' encoding='UTF-8'?>
<openerp>
  <data>
    <record id="sale_stock_accrual_view" model="ir.ui.view">
        <field name="name">Sale Stock Accrual</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//h1" position="after">
                <div class="oe_right oe_button_box" name="buttons">
                    <button
                        type="object"
                        string="Stock Accruals"
                        name="view_accrual"
                        class="oe_stat_button"
                        icon="fa-truck"
                        groups="account.group_account_user"
                        />
                    <button type="object" name="reconcile_stock_accrual" class="oe_stat_button" groups="account.group_account_user" icon="fa-random">
                        <field name="reconciliation_pending" widget="statinfo" string="Match Accruals"/>
                    </button>
                </div>
            </xpath>
        </field>
    </record>

    <record id="view_sale order stock accrual search" model="ir.ui.view">
        <field name="name">Sale Order Stock Accrual Search</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="priority">26</field>
        <field name="arch" type="xml">
            <xpath expr="//filter[@string='Quotations']" position="after">
                <filter string="Pending for Reconciliation" domain="[('reconciliation_pending','!=',0)]"/>
            </xpath>
        </field>
    </record>

    <record id="view_sale order stock accrual tree" model="ir.ui.view">
        <field name="name">Sale Order Stock Accrual Tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="priority">26</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="after">
                <field name="reconciliation_pending"/>
            </xpath>
        </field>
    </record>
  </data>
</openerp>
